; -------------------------------------------------------------------------
; Author: sascha_lammers@gmx.de
; -------------------------------------------------------------------------
; ESP8266 shared debug environment
; -------------------------------------------------------------------------

[common]
extends = common_base
platform = espressif8266
; platform = https://github.com/platformio/platform-espressif8266.git
platform_packages = platformio/framework-arduinoespressif8266 @ https://github.com/sascha432/Arduino
    ; platformio/toolchain-xtensa @ ~2.100300.0
    ; platformio/tool-mklittlefs @ ~1.203.0

board = nodemcu
; board = esp01_1m
; upload_resetmethod = ck

board_build.filesystem = littlefs
upload_speed = 921600
monitor_speed = 115200
monitor_rts = 0
monitor_dtr = 0

monitor_filters = esp8266_exception_decoder, direct

src_filter = ${common_base.src_filter}
    +<../src/plugins/ssdp/>
    +<../src/plugins/syslog/>

; lib_deps =
;     ESP8266SSDP
;     https://github.com/sascha432/ESPAsyncTCP.git
;     https://github.com/sascha432/ESPAsyncWebServer.git
;     https://github.com/sascha432/async-mqtt-client.git
;     https://github.com/sascha432/ArduinoFlashStringGenerator
;     https://github.com/sascha432/i2c_uart_bridge
;     https://github.com/sascha432/libcrc16.git
;     https://github.com/sascha432/NeoPixelEspEx.git
;     https://github.com/sascha432/KFCIOExpander
;     https://github.com/adafruit/Adafruit_BME280_Library.git#2.1.4
;     https://github.com/adafruit/Adafruit_CCS811.git#1.0.5

build_flags = ${common_base.build_flags}
    -D NO_GLOBAL_SERIAL=1
    -D IOT_SSDP_SUPPORT=1
    -D SYSLOG_SUPPORT=1
    -D WS_MAX_QUEUED_MESSAGES=16
    -D WS_MAX_QUEUED_MESSAGES_SIZE=5120
    -D WS_MIN_QUEUED_MESSAGES=8
    -D WS_MIN_QUEUED_MESSAGES_SIZE=2416
    -D WS_MAX_QUEUED_MESSAGES_MIN_HEAP=16384
